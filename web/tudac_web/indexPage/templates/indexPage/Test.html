<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no">
    <title>간단한 지도 표시하기</title>


    <script type="text/javascript" src="https://openapi.map.naver.com/openapi/v3/maps.js?ncpClientId=ng6xz547b0"></script>

g
</head>
<body>
<div id="map" style="width:400px;height:400px;"></div>

<button class="like" name="abcd" type="button" style="width:400px"><p style="font-size: 20px;">어여쁜 버튼 *P*</p></button>

<script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
<script type="text/javascript">
    Map(37,127,6);
    function Map(Lat, Lng, Zoom, marker=false){
        var mapOptions = {
        center: new naver.maps.LatLng(Lat,Lng),
        zoom: Zoom
        };
        var map = new naver.maps.Map('map', mapOptions);
        if(marker){
          var marker = new naver.maps.Marker({
            position: new naver.maps.LatLng(Lat,Lng),
            map:map
          });
        }
    }
    

  $(".like").click(function(){
    var pk = $(this).attr('name')
    $.ajax({ // .like 버튼을 클릭하면 새로고침 없이 ajax로 서버와 통신
      type: "POST", // 데이터를 전송하는 방법을 지정
      url: "{% url 'indexPage:mapChange' %}", // 통신할 url을 지정
      data: {'pk': pk, 'csrfmiddlewaretoken': '{{ csrf_token }}'}, // 서버로 데이터 전송시 옵션
      dataType: "json", // 서버측에서 전송한 데이터를 어떤 형식의 데이터로서 해석할 것인가를 지정, 없으면 알아서 판단
      // 서버측에서 전송한 Response 데이터 형식 (json)
      success: function(response){ // 통신 성공시 
        Map(response.Lat,response.Lng,response.Zoom,true);
      },
      error: function(request, status, error){ // 통신 실패시
        alert("접속에 실패했습니다. 다시 시도해주세요.");
      },
    });
  })
</script>


</body>
</html>