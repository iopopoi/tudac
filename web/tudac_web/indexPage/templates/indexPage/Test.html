<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no">
    <title>테스트</title>
    <style>
      .f{font-size:30px;}
    </style>


    <!--제이쿼리 스크립트, 모든 html에 넣어주세요-->
    <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>

    <!--네이버 맵 api 호출 스크립트-->
    <script type="text/javascript" src="https://openapi.map.naver.com/openapi/v3/maps.js?ncpClientId=ng6xz547b0"></script>
</head>
<body>

  <!--네이버 맵 // 필수요소 : id=map -->
  <div id="map" style="width:400px;height:400px;"></div>

  <!--버튼 // 필수요소 : class="map_btn" name="butt" -->
  <button class="map_btn" name="butt" type="button" style="width:400px"><p style="font-size: 20px;">어여쁜 버튼 *P*</p></button>

  <!--지역 이름과, 장소 이름  필수요소 : 각각 class=region, class=name   태그는 상관없음-->
  <br>
  <p class="f" style="display:inline">Region : </p><p class="region f" style="display:inline"></p><br>
  <p class="f" style="display:inline">Name : </p><p class="name f" style="display:inline"></p><br><br>

  <!--아래 스크립트는 복사해서 html 최하단에 붙여넣으세요-->
  <script type="text/javascript">
      Map(37,127,6);
      function Map(Lat, Lng, Zoom, marker=false){
          var mapOptions = {
          center: new naver.maps.LatLng(Lat,Lng),
          zoom: Zoom
          };
          var map = new naver.maps.Map('map', mapOptions);
          if(marker){
            var marker = new naver.maps.Marker({
              position: new naver.maps.LatLng(Lat,Lng),
              map:map,
              animation: naver.maps.Animation.DROP
            });
          }
      }
    $(".map_btn").click(function(){
      var pk = $(this).attr('name')
      $.ajax({ // .like 버튼을 클릭하면 새로고침 없이 ajax로 서버와 통신
        type: "POST", // 데이터를 전송하는 방법을 지정
        url: "{% url 'indexPage:mapChange' %}", // 통신할 url을 지정
        data: {'pk': pk, 'csrfmiddlewaretoken': '{{ csrf_token }}'}, // 서버로 데이터 전송시 옵션
        dataType: "json", // 서버측에서 전송한 데이터를 어떤 형식의 데이터로서 해석할 것인가를 지정, 없으면 알아서 판단
        // 서버측에서 전송한 Response 데이터 형식 (json)
        success: function(response){ // 통신 성공시 
          Map(response.Lat,response.Lng,response.Zoom,true);
          $(".region").text(response.Region);
          $(".name").text(response.Name);
        },
        error: function(request, status, error){ // 통신 실패시
          alert("접속에 실패했습니다. 다시 시도해주세요.");
        },
      });
    })
  </script>








<style> .time{display: inline;}</style>

<!-- 시간 표시, 태그 상관 없음, 필수요소 : id=year, id=month, id=day, id=wday -->
<p class="time" id="year">2020</p> <p class="time" id="month">00</p> <p class="time" id="day">00</p> <p class="time" id="wday"></p><p class="time">요일</p>

<!--버튼, 필수요소 : class=time, name=butt-->
<button class="time" name="butt" type="button">버튼!</button>

<!--스크립트는 html 최하단에 붙여넣어주세용 -->
<script>
  $(".time").click(function(){
    var pk = $(this).attr('name')
    $.ajax({
      type: "POST",
      url: "{%url 'indexPage:timeChange' %}",
      data: {'pk':pk, 'csrfmiddlewaretoken':'{{csrf_token}}'},
      dataType:"json",
      success: function(response){
        $("#year").text(response.Year);
        $("#month").text(response.Month);
        $("#day").text(response.Day);
        $("#wday").text(response.Wday);
      },
      error: function(request,status,error){
        alert("접속에 실패했습니다. 다시 시도해주세요.");
      }
    });
  })
</script>



</body>
</html>